/* eslint-disable react-hooks/exhaustive-deps */
import { useEffect, useRef, useState, useCallback } from 'react'
import { Animated, ScrollView, Image, TouchableOpacity } from 'react-native'
import FastImage from 'react-native-fast-image'
import { Icon } from 'react-native-elements'
import { s, vs, ScaledSheet } from 'react-native-size-matters/extend'
import LinearGradient from 'react-native-linear-gradient'
import Svg, { Path, Defs, LinearGradient as LinearGradientSVG, Stop } from "react-native-svg"
import { Box, Text, Screen } from '@components/index'
import { LinearGradient as LinearGradientHelper } from '@components/linear-gradient'
import { typography } from '@styles/typography'
import { metrics } from '@styles/metrics'
import { translate } from '@i18n/translate'
import { palette } from '@styles/palette'
import Routes from '@navigation/routes'

const ONBOARD_LEFT = require('@assets/images/onboardL.png')
const ONBOARD_RIGHT = require('@assets/images/onboardR.png')
const AnimatedLinearGradient = Animated.createAnimatedComponent(LinearGradientHelper)

const screens = [
  {
    screenName: 'left',
    image: ONBOARD_LEFT,
    description: 'onboard_left_description',
    buttonLabel: 'next',
  },
  {
    screenName: 'right',
    image: ONBOARD_RIGHT,
    description: 'onboard_right_description',
  },
]

const OnboardScreen = ({ navigation }) => {
  const [animVal] = useState(new Animated.Value(0))
  const [screenArray, setScreenArray] = useState([])
  const [barArray, setBarArray] = useState([])
  const [button, setButton] = useState(null)
  const scrollViewRef = useRef(null)
  const isFirstScreen = useRef(true)

  useEffect(() => {
    if (screenArray.length > 0) return
    const tempScreenArray = []
    const tempBarArray = []
    screens.forEach((screen, i) => {
      const content = (
        <Box key={i} flex={1}>
          <Image resizeMode='contain' source={screen.image} style={styles.imgBg} />
          {screen.screenName === 'left' && <Image source={require('@assets/images/small-logo.png')} style={styles.logo} />}
          <Box alignItems='flex-start' marginTop='vs-9'>
            {renderTextView(screen)}
          </Box>
        </Box>
      )
      tempScreenArray.push(content)
      const scrollBarVal = animVal.interpolate({
        inputRange: [metrics.screenWidth * (i - 1), metrics.screenWidth * (i + 1)],
        outputRange: [3 - i * 2, 1 + i * 2],
        extrapolate: 'clamp',
      })
      const colorBarVal1 = animVal.interpolate({
        inputRange: [metrics.screenWidth * (i - 1), metrics.screenWidth * (i + 1)],
        outputRange: [i === 0 ? palette.gradient.buttonV2[0] : palette.silver, i === 1 ? palette.gradient.buttonV2[0] : palette.silver],
        extrapolate: 'clamp',
      })
      const colorBarVal2 = animVal.interpolate({
        inputRange: [metrics.screenWidth * (i - 1), metrics.screenWidth * (i + 1)],
        outputRange: [i === 0 ? palette.gradient.buttonV2[1] : palette.silver, i === 1 ? palette.gradient.buttonV2[1] : palette.silver],
        extrapolate: 'clamp',
      })
      const thisBar = (
        <AnimatedLinearGradient
          key={i}
          color1={colorBarVal1}
          color2={colorBarVal2}
          style={[styles.bar, { flex: scrollBarVal }]}
        />
      )
      barArray.push(thisBar)
    })
    setScreenArray([screenArray, ...tempScreenArray])
    setBarArray([barArray, ...tempBarArray])
  }, [])

  useEffect(() => {
    const scrollBarValNext = animVal.interpolate({
      inputRange: [0, metrics.screenWidth],
      outputRange: [metrics.screenWidth * 0.13, -metrics.screenWidth],
      extrapolate: 'clamp',
    })
    const scrollBarValGetStart = animVal.interpolate({
      inputRange: [0, metrics.screenWidth],
      outputRange: [metrics.screenWidth, -metrics.screenWidth * 0.13],
      extrapolate: 'clamp'
    })
    const scrollBarValIcon = animVal.interpolate({
      inputRange: [0, metrics.screenWidth],
      outputRange: [metrics.screenWidth * 0.15, metrics.screenWidth * 0.22],
      extrapolate: 'clamp',
    })
    const tempButton = (
      <TouchableOpacity onPress={onNextPress}>
        <Box style={styles.buttonContainer}>
          <LinearGradient
            colors={palette.gradient.buttonV2}
            start={{ x: 0, y: 0 }}
            end={{ x: 1, y: 1 }}
            style={styles.fixSize}
          />
          <Box style={[styles.buttonContent, styles.fixSize]}>
            <Animated.Text
              style={[styles.buttonText, {
                transform: [{
                  translateX: scrollBarValNext
                }]
              }]}>
              {translate('next')}
            </Animated.Text>
            <Animated.View
              style={{
                transform: [{
                  translateX: scrollBarValIcon
                }]
              }}>
              <Icon type='octicons' color='white' name='chevron-right' size={30} />
            </Animated.View>
            <Animated.Text
              style={[styles.buttonText, {
                transform: [{
                  translateX: scrollBarValGetStart
                }]
              }]}>
              {translate('get_started')}
            </Animated.Text>
          </Box>
        </Box>
      </TouchableOpacity>
    )
    setButton(tempButton)
  }, [])

  const onNextPress = useCallback(() => {
    if (isFirstScreen.current) {
      scrollViewRef.current && scrollViewRef.current.scrollToEnd({ animated: true })
    } else {
      navigation.navigate(Routes.Athlete.QuickAccess)
    }
  }, [navigation])

  const onBackPress = useCallback(() => {
    if (isFirstScreen.current) {
      navigation.goBack()
    } else {
      scrollViewRef.current && scrollViewRef.current.scrollTo({ x: 0, y: 0, animated: true })
    }
  }, [navigation])

  const renderTextView = (screen) => {
    if (screen.screenName === 'left') {
      return (
        <Box key={screen.screenName} paddingHorizontal='vs-5.5' width={metrics.screenWidth}>
          <Svg
            width={s(275)}
            height={s(106)}
            viewBox="0 0 304 117"
          >
            <Path
              d="M8.169 28h5.395l4.973-17.118h.204L23.727 28h5.395l7.492-26.182h-6.047l-4.334 18.23h-.23l-4.769-18.23h-5.177L11.276 20.01h-.218L6.724 1.818H.678L8.169 28zm38.145.384c4.858 0 8.13-2.366 8.897-6.009l-5.037-.332c-.55 1.495-1.956 2.275-3.77 2.275-2.724 0-4.45-1.802-4.45-4.73v-.013h13.372V18.08c0-6.674-4.04-9.972-9.23-9.972-5.778 0-9.524 4.104-9.524 10.163 0 6.226 3.695 10.113 9.742 10.113zM41.954 16.2c.115-2.237 1.816-4.027 4.232-4.027 2.365 0 4.001 1.688 4.014 4.027h-8.246zm30.858 12.17c2.902 0 4.781-1.265 5.74-3.093h.153V28h5.165V14.756c0-4.68-3.963-6.648-8.335-6.648-4.705 0-7.798 2.25-8.553 5.83l5.037.409c.37-1.304 1.534-2.263 3.49-2.263 1.854 0 2.915.933 2.915 2.544v.076c0 1.266-1.342 1.432-4.756 1.765-3.886.358-7.376 1.662-7.376 6.047 0 3.886 2.774 5.855 6.52 5.855zm1.56-3.758c-1.675 0-2.877-.78-2.877-2.275 0-1.534 1.266-2.289 3.183-2.557 1.19-.166 3.132-.448 3.784-.882v2.084c0 2.058-1.7 3.63-4.09 3.63zM88.094 28h5.446V16.89c0-2.416 1.764-4.078 4.168-4.078.754 0 1.79.128 2.301.295V8.274a8.175 8.175 0 00-1.713-.192c-2.199 0-4.001 1.279-4.718 3.708h-.204V8.364h-5.28V28zm22.765.384c4.858 0 8.131-2.366 8.898-6.009l-5.037-.332c-.549 1.495-1.956 2.275-3.771 2.275-2.723 0-4.449-1.802-4.449-4.73v-.013h13.372V18.08c0-6.674-4.04-9.972-9.23-9.972-5.778 0-9.524 4.104-9.524 10.163 0 6.226 3.695 10.113 9.741 10.113zM106.501 16.2c.115-2.237 1.815-4.027 4.232-4.027 2.365 0 4.001 1.688 4.014 4.027h-8.246zm35.703-7.836h-3.695V3.659h-5.446v4.705h-2.684v4.09h2.684v10.228c-.025 3.848 2.595 5.753 6.546 5.587a10.597 10.597 0 002.953-.512l-.857-4.053c-.268.052-.843.18-1.355.18-1.087 0-1.841-.41-1.841-1.918v-9.512h3.695v-4.09zm9.147 20.007c2.902 0 4.781-1.266 5.74-3.094h.153V28h5.165V14.756c0-4.68-3.963-6.648-8.335-6.648-4.705 0-7.798 2.25-8.553 5.83l5.037.409c.371-1.304 1.534-2.263 3.49-2.263 1.854 0 2.915.933 2.915 2.544v.076c0 1.266-1.342 1.432-4.756 1.765-3.886.358-7.376 1.662-7.376 6.047 0 3.886 2.774 5.855 6.52 5.855zm1.56-3.759c-1.675 0-2.877-.78-2.877-2.275 0-1.534 1.266-2.289 3.183-2.557 1.189-.166 3.132-.448 3.784-.882v2.084c0 2.058-1.7 3.63-4.09 3.63zM166.634 28h5.446v-6.239l1.47-1.674L178.907 28h6.379l-7.657-11.135 7.286-8.501h-6.251l-6.29 7.453h-.294V1.818h-5.446V28zm20.953 0h5.446V8.364h-5.446V28zm2.736-22.168c1.624 0 2.953-1.24 2.953-2.761 0-1.509-1.329-2.749-2.953-2.749-1.611 0-2.94 1.24-2.94 2.749 0 1.521 1.329 2.761 2.94 2.761zm12.519 10.816c.013-2.531 1.521-4.014 3.72-4.014 2.186 0 3.503 1.431 3.49 3.835V28h5.446V15.497c0-4.576-2.684-7.389-6.775-7.389-2.915 0-5.024 1.432-5.907 3.72h-.23V8.364h-5.19V28h5.446V16.648zm25.795 19.125c5.612 0 9.601-2.557 9.601-7.581V8.364h-5.408v3.298h-.204c-.729-1.598-2.327-3.554-5.613-3.554-4.308 0-7.951 3.35-7.951 10.035 0 6.533 3.541 9.576 7.964 9.576 3.132 0 4.884-1.573 5.6-3.196h.23v3.592c0 2.698-1.726 3.746-4.091 3.746-2.403 0-3.618-1.049-4.065-2.237l-5.037.677c.652 3.094 3.681 5.472 8.974 5.472zm.115-12.145c-2.672 0-4.129-2.122-4.129-5.51 0-3.337 1.432-5.676 4.129-5.676 2.646 0 4.129 2.237 4.129 5.676 0 3.464-1.508 5.51-4.129 5.51zm14.807 28.736h-3.694v-4.705h-5.446v4.705h-2.685v4.09h2.685v10.228c-.026 3.848 2.595 5.753 6.545 5.587a10.59 10.59 0 002.953-.512l-.856-4.053c-.269.052-.844.18-1.355.18-1.087 0-1.841-.41-1.841-1.918v-9.511h3.694v-4.091zm12.209 20.02c5.957 0 9.665-4.079 9.665-10.126 0-6.085-3.708-10.15-9.665-10.15-5.957 0-9.665 4.065-9.665 10.15 0 6.047 3.708 10.125 9.665 10.125zm.026-4.22c-2.749 0-4.155-2.518-4.155-5.944s1.406-5.957 4.155-5.957c2.697 0 4.103 2.531 4.103 5.957 0 3.426-1.406 5.945-4.103 5.945zm27.112 4.207c2.902 0 4.781-1.266 5.74-3.094h.153V72h5.165V58.756c0-4.68-3.963-6.648-8.335-6.648-4.705 0-7.799 2.25-8.553 5.83l5.037.409c.371-1.304 1.534-2.263 3.49-2.263 1.854 0 2.915.933 2.915 2.544v.077c0 1.265-1.343 1.431-4.756 1.764-3.886.358-7.376 1.662-7.376 6.047 0 3.886 2.774 5.855 6.52 5.855zm1.559-3.759c-1.675 0-2.876-.78-2.876-2.275 0-1.534 1.265-2.289 3.183-2.557 1.189-.166 3.132-.448 3.784-.882v2.083c0 2.059-1.7 3.631-4.091 3.631zM7.619 104.648c.013-2.532 1.522-4.014 3.72-4.014 2.187 0 3.503 1.431 3.49 3.835V116h5.447v-12.503c0-4.576-2.685-7.389-6.776-7.389-2.915 0-5.024 1.432-5.906 3.72h-.23v-3.464h-5.19V116h5.445v-11.352zm25.898 11.736c4.858 0 8.13-2.366 8.897-6.009l-5.037-.332c-.55 1.495-1.956 2.275-3.77 2.275-2.724 0-4.45-1.802-4.45-4.73v-.013H42.53v-1.495c0-6.674-4.04-9.972-9.23-9.972-5.778 0-9.524 4.104-9.524 10.163 0 6.226 3.695 10.113 9.742 10.113zm-4.36-12.184c.115-2.237 1.816-4.027 4.232-4.027 2.365 0 4.001 1.688 4.014 4.027h-8.246zm20.66 11.8h5.752l3.375-12.349h.243L62.562 116h5.766l5.33-19.636h-5.496L65.17 109.48h-.166l-3.222-13.116h-5.407l-3.17 13.193h-.18l-3.042-13.193h-5.51L49.816 116zm40.525-26.182h-5.446V116h5.446V89.818zm13.311 26.566c4.858 0 8.131-2.366 8.898-6.009l-5.037-.332c-.55 1.495-1.956 2.275-3.771 2.275-2.723 0-4.449-1.802-4.449-4.73v-.013h13.372v-1.495c0-6.674-4.04-9.972-9.23-9.972-5.778 0-9.524 4.104-9.524 10.163 0 6.226 3.694 10.113 9.741 10.113zM99.294 104.2c.115-2.237 1.815-4.027 4.232-4.027 2.365 0 4.001 1.688 4.014 4.027h-8.246zm34.67-7.836h-5.765l-4.065 14.049h-.205l-4.078-14.05h-5.753L120.963 116h6.136l6.865-19.636zm11.068 20.02c4.858 0 8.131-2.366 8.898-6.009l-5.037-.332c-.55 1.495-1.956 2.275-3.771 2.275-2.723 0-4.449-1.802-4.449-4.73v-.013h13.372v-1.495c0-6.674-4.04-9.972-9.23-9.972-5.778 0-9.524 4.104-9.524 10.163 0 6.226 3.694 10.113 9.741 10.113zm-4.359-12.184c.115-2.237 1.815-4.027 4.231-4.027 2.366 0 4.002 1.688 4.015 4.027h-8.246zm22.372-14.382h-5.446V116h5.446V89.818zm7.546 26.514c1.636 0 3.055-1.368 3.068-3.068-.013-1.675-1.432-3.042-3.068-3.042-1.688 0-3.081 1.367-3.068 3.042-.013 1.7 1.38 3.068 3.068 3.068z"
              fill="#4F4F4F"
            />
            <Path
              d="M261.463 8.364h-3.899V7.047c0-1.33.537-2.11 2.135-2.11.652 0 1.317.141 1.752.282l.958-4.091c-.677-.205-2.173-.537-3.848-.537-3.694 0-6.443 2.084-6.443 6.354v1.419h-2.774v4.09h2.774V28h5.446V12.454h3.899v-4.09zm8.224 20.007c2.902 0 4.781-1.266 5.74-3.094h.153V28h5.165V14.756c0-4.68-3.963-6.648-8.335-6.648-4.705 0-7.798 2.25-8.553 5.83l5.037.409c.371-1.304 1.534-2.263 3.49-2.263 1.854 0 2.915.933 2.915 2.544v.076c0 1.266-1.342 1.432-4.756 1.765-3.886.358-7.376 1.662-7.376 6.047 0 3.886 2.774 5.855 6.52 5.855zm1.559-3.759c-1.674 0-2.876-.78-2.876-2.275 0-1.534 1.266-2.289 3.183-2.557 1.189-.166 3.132-.448 3.784-.882v2.084c0 2.058-1.7 3.63-4.091 3.63zm19.17-7.964c.013-2.531 1.522-4.014 3.72-4.014 2.186 0 3.503 1.431 3.49 3.835V28h5.446V15.497c0-4.576-2.684-7.389-6.775-7.389-2.915 0-5.024 1.432-5.906 3.72h-.23V8.364h-5.191V28h5.446V16.648zM11.122 72.384c4.858 0 8.13-2.365 8.898-6.009l-5.037-.332c-.55 1.495-1.956 2.275-3.771 2.275-2.723 0-4.45-1.802-4.45-4.73v-.013h13.373V62.08c0-6.674-4.04-9.972-9.23-9.972-5.779 0-9.524 4.104-9.524 10.163 0 6.226 3.694 10.112 9.741 10.112zM6.762 60.2c.116-2.237 1.816-4.027 4.232-4.027 2.365 0 4.002 1.688 4.014 4.027H6.764zm22.373.448c.013-2.532 1.521-4.015 3.72-4.015 2.186 0 3.503 1.432 3.49 3.836V72h5.446V59.497c0-4.577-2.684-7.389-6.775-7.389-2.915 0-5.024 1.432-5.907 3.72h-.23v-3.464h-5.19V72h5.446V60.648zM54.93 79.773c5.612 0 9.6-2.557 9.6-7.581V52.364h-5.407v3.298h-.204c-.729-1.598-2.327-3.554-5.612-3.554-4.309 0-7.952 3.35-7.952 10.036 0 6.532 3.541 9.575 7.964 9.575 3.132 0 4.884-1.573 5.6-3.196h.23v3.592c0 2.698-1.726 3.746-4.091 3.746-2.404 0-3.618-1.049-4.066-2.237l-5.036.677c.652 3.094 3.681 5.472 8.974 5.472zm.115-12.145c-2.672 0-4.13-2.122-4.13-5.51 0-3.337 1.433-5.676 4.13-5.676 2.646 0 4.13 2.237 4.13 5.676 0 3.464-1.51 5.51-4.13 5.51zm19.42 4.743c2.901 0 4.78-1.266 5.74-3.094h.153V72h5.164V58.756c0-4.68-3.963-6.648-8.335-6.648-4.704 0-7.798 2.25-8.552 5.83l5.036.409c.371-1.304 1.535-2.263 3.49-2.263 1.854 0 2.915.933 2.915 2.544v.077c0 1.265-1.342 1.431-4.755 1.764-3.887.358-7.377 1.662-7.377 6.047 0 3.886 2.774 5.855 6.52 5.855zm1.559-3.759c-1.675 0-2.877-.78-2.877-2.275 0-1.534 1.266-2.289 3.184-2.557 1.188-.166 3.132-.448 3.784-.882v2.083c0 2.059-1.7 3.631-4.091 3.631zm22.57 11.16c5.612 0 9.601-2.556 9.601-7.58V52.364h-5.408v3.298h-.204c-.729-1.598-2.327-3.554-5.612-3.554-4.309 0-7.952 3.35-7.952 10.036 0 6.532 3.541 9.575 7.964 9.575 3.132 0 4.884-1.573 5.6-3.196h.23v3.592c0 2.698-1.726 3.746-4.091 3.746-2.403 0-3.618-1.049-4.065-2.237l-5.037.677c.652 3.094 3.681 5.472 8.974 5.472zm.115-12.144c-2.672 0-4.13-2.122-4.13-5.51 0-3.337 1.433-5.676 4.13-5.676 2.646 0 4.129 2.237 4.129 5.676 0 3.464-1.508 5.51-4.129 5.51zm22.769 4.755c4.858 0 8.13-2.364 8.897-6.008l-5.037-.332c-.549 1.495-1.956 2.275-3.771 2.275-2.723 0-4.449-1.802-4.449-4.73v-.013h13.372V62.08c0-6.674-4.039-9.972-9.23-9.972-5.778 0-9.524 4.104-9.524 10.163 0 6.226 3.695 10.112 9.742 10.112zm-4.36-12.183c.115-2.237 1.816-4.027 4.232-4.027 2.365 0 4.001 1.688 4.014 4.027h-8.246zM134.044 72h5.446V60.213c0-2.173 1.381-3.618 3.196-3.618 1.79 0 2.992 1.227 2.992 3.158V72h5.28V60.008c0-2.032 1.163-3.413 3.145-3.413 1.738 0 3.042 1.087 3.042 3.273V72h5.433V58.794c0-4.257-2.531-6.686-6.187-6.686-2.876 0-5.114 1.47-5.919 3.72h-.205c-.626-2.275-2.633-3.72-5.331-3.72-2.646 0-4.653 1.406-5.471 3.72h-.23v-3.464h-5.191V72zm41.785.383c4.858 0 8.131-2.364 8.898-6.008l-5.037-.332c-.55 1.495-1.956 2.275-3.771 2.275-2.723 0-4.449-1.802-4.449-4.73v-.013h13.372V62.08c0-6.674-4.04-9.972-9.23-9.972-5.779 0-9.524 4.104-9.524 10.163 0 6.226 3.694 10.112 9.741 10.112zM171.47 60.2c.115-2.237 1.815-4.027 4.231-4.027 2.365 0 4.002 1.688 4.015 4.027h-8.246zm22.372.448c.013-2.532 1.521-4.015 3.72-4.015 2.186 0 3.503 1.432 3.49 3.836V72h5.446V59.497c0-4.577-2.684-7.389-6.775-7.389-2.915 0-5.024 1.432-5.907 3.72h-.23v-3.464h-5.19V72h5.446V60.648zm27.393-8.284h-3.695v-4.705h-5.446v4.705h-2.684v4.09h2.684v10.228c-.025 3.848 2.596 5.753 6.546 5.587a10.597 10.597 0 002.953-.512l-.856-4.053c-.269.052-.844.18-1.356.18-1.086 0-1.841-.41-1.841-1.918v-9.511h3.695v-4.091z"
              fill="url(#paint0_linear)"
            />
            <Defs>
              <LinearGradientSVG
                id="paint0_linear"
                x1={374.811}
                y1={-31.4445}
                x2={11.6636}
                y2={24.7367}
                gradientUnits="userSpaceOnUse"
              >
                <Stop stopColor={palette.gradient.buttonV2[1]} />
                <Stop offset={1} stopColor={palette.gradient.buttonV2[0]} />
              </LinearGradientSVG>
            </Defs>
          </Svg>
          <Box marginTop='lx'>
            <Text
              color="emperor"
              lineHeight={vs(24)}
              tx={screen.description}
              fontSize={typography.fontSize.regularNotScale}
              fontFamily={typography.fontFamily.primary.regular}
            />
          </Box>
        </Box>
      )
    } else {
      return (
        <Box key={screen.screenName} paddingHorizontal='vs-5.5' width={metrics.screenWidth}>
          <Svg
            width={s(326)}
            height={s(112)}
            viewBox="0 0 360 124"
          >
            <Path
              d="M2.276 1.818V28h5.369V10.895h.217l6.776 16.977h3.656L25.07 10.96h.217V28h5.37V1.818h-6.828L16.62 19.41h-.306L9.102 1.82H2.275zm41.788 26.566c4.858 0 8.13-2.366 8.897-6.009l-5.037-.332c-.55 1.495-1.956 2.275-3.77 2.275-2.724 0-4.45-1.802-4.45-4.73v-.013h13.372V18.08c0-6.674-4.04-9.972-9.23-9.972-5.778 0-9.524 4.104-9.524 10.163 0 6.226 3.695 10.113 9.742 10.113zM39.704 16.2c.115-2.237 1.816-4.027 4.232-4.027 2.365 0 4.001 1.688 4.014 4.027h-8.246zM65.58 28.384c4.858 0 8.13-2.366 8.898-6.009l-5.037-.332c-.55 1.495-1.956 2.275-3.771 2.275-2.723 0-4.45-1.802-4.45-4.73v-.013h13.373V18.08c0-6.674-4.04-9.972-9.23-9.972-5.778 0-9.524 4.104-9.524 10.163 0 6.226 3.694 10.113 9.741 10.113zM61.22 16.2c.116-2.237 1.816-4.027 4.232-4.027 2.365 0 4.002 1.688 4.015 4.027H61.22zm27.372-7.836h-3.695V3.659H79.45v4.705h-2.685v4.09h2.685v10.228c-.026 3.848 2.595 5.753 6.545 5.587a10.594 10.594 0 002.953-.512l-.856-4.053c-.269.052-.844.18-1.355.18-1.087 0-1.841-.41-1.841-1.918v-9.512h3.695v-4.09zm19.908 20.02c2.288 0 4.768-.64 6.698-2.148L116.783 28h5.676l-3.938-4.513c1.458-1.93 2.378-4.704 2.378-8.258h-4.513a9.523 9.523 0 01-1.112 4.525l-4.321-4.96 1.534-1.1c2.199-1.585 3.477-3.579 3.477-6.046 0-3.35-2.595-6.175-6.801-6.175-4.295 0-7.146 2.928-7.146 6.724 0 2.327 1.125 4.27 2.493 6.009-2.851 1.956-4.769 3.81-4.769 6.84 0 4.129 3.312 7.338 8.758 7.338zm3.758-5.42c-1.099.677-2.301 1.047-3.49 1.047-2.276 0-3.746-1.406-3.746-3.272 0-.998.678-2.148 2.122-3.196l.154-.103 4.96 5.523zm-3.925-11.276c-.971-1.228-1.649-2.314-1.649-3.401 0-1.317.997-2.416 2.519-2.43 1.534-.012 2.403 1.062 2.403 2.098 0 1.099-.601 2.007-1.905 2.838l-1.368.895zm33.6 16.696c5.229 0 8.514-3.069 8.77-7.581h-5.139c-.32 2.096-1.7 3.272-3.567 3.272-2.544 0-4.193-2.135-4.193-5.893 0-3.708 1.662-5.83 4.193-5.83 1.994 0 3.273 1.317 3.567 3.273h5.139c-.23-4.538-3.669-7.517-8.795-7.517-5.958 0-9.64 4.13-9.64 10.15 0 5.97 3.618 10.126 9.665 10.126zm21.129 0c5.957 0 9.665-4.079 9.665-10.125 0-6.086-3.708-10.151-9.665-10.151-5.957 0-9.665 4.065-9.665 10.15 0 6.047 3.708 10.126 9.665 10.126zm.026-4.22c-2.749 0-4.155-2.518-4.155-5.944s1.406-5.957 4.155-5.957c2.697 0 4.103 2.531 4.103 5.957 0 3.426-1.406 5.945-4.103 5.945zm18.626-7.516c.013-2.531 1.521-4.014 3.72-4.014 2.186 0 3.503 1.431 3.49 3.835V28h5.446V15.497c0-4.576-2.684-7.389-6.775-7.389-2.915 0-5.024 1.432-5.906 3.72h-.231V8.364h-5.19V28h5.446V16.648zm22.395 0c.012-2.531 1.521-4.014 3.72-4.014 2.186 0 3.503 1.431 3.49 3.835V28h5.446V15.497c0-4.576-2.685-7.389-6.776-7.389-2.914 0-5.024 1.432-5.906 3.72h-.23V8.364h-5.19V28h5.446V16.648zm25.897 11.736c4.858 0 8.131-2.366 8.898-6.009l-5.037-.332c-.55 1.495-1.956 2.275-3.772 2.275-2.723 0-4.448-1.802-4.448-4.73v-.013h13.372V18.08c0-6.674-4.04-9.972-9.23-9.972-5.779 0-9.525 4.104-9.525 10.163 0 6.226 3.695 10.113 9.742 10.113zM225.646 16.2c.115-2.237 1.815-4.027 4.231-4.027 2.365 0 4.002 1.688 4.014 4.027h-8.245zm25.798 12.184c5.229 0 8.514-3.069 8.77-7.581h-5.139c-.32 2.096-1.701 3.272-3.567 3.272-2.544 0-4.193-2.135-4.193-5.893 0-3.708 1.662-5.83 4.193-5.83 1.994 0 3.273 1.317 3.567 3.273h5.139c-.23-4.538-3.669-7.517-8.796-7.517-5.957 0-9.639 4.13-9.639 10.15 0 5.97 3.618 10.126 9.665 10.126zm22.701-20.02h-3.694V3.659h-5.446v4.705h-2.685v4.09h2.685v10.228c-.026 3.848 2.595 5.753 6.545 5.587a10.597 10.597 0 002.953-.512l-.856-4.053c-.269.052-.844.18-1.355.18-1.087 0-1.841-.41-1.841-1.918v-9.512h3.694v-4.09z"
              fill="url(#paint0_linear)"
            />
            <Path
              d="M289.898 28h5.753l3.375-12.35h.243L302.644 28h5.766l5.331-19.636h-5.497l-2.992 13.116h-.166l-3.222-13.116h-5.407l-3.171 13.193h-.179l-3.042-13.193h-5.51L289.898 28zm26.748 0h5.446V8.364h-5.446V28zm2.736-22.168c1.623 0 2.953-1.24 2.953-2.761 0-1.509-1.33-2.749-2.953-2.749-1.611 0-2.941 1.24-2.941 2.749 0 1.521 1.33 2.761 2.941 2.761zm17.517 2.532h-3.694V3.659h-5.446v4.705h-2.685v4.09h2.685v10.228c-.026 3.848 2.595 5.753 6.545 5.587a10.597 10.597 0 002.953-.512l-.856-4.053c-.269.052-.844.18-1.356.18-1.086 0-1.84-.41-1.84-1.918v-9.512h3.694v-4.09zm9.416 8.284c.012-2.531 1.559-4.014 3.784-4.014 2.211 0 3.515 1.419 3.503 3.835V28h5.446V15.497c.012-4.602-2.698-7.389-6.789-7.389-2.978 0-4.973 1.406-5.868 3.72h-.23V1.818h-5.292V28h5.446V16.648zM5.535 79.364c4.053 0 6.2-2.071 7.313-5.242L20.48 52.39l-5.766-.025-4.103 14.42h-.205l-4.065-14.42H.614l7.044 20.199-.32.83c-.716 1.841-2.084 1.93-4.001 1.343L2.109 78.8c.78.332 2.046.563 3.427.563zm25.936-6.98c5.958 0 9.665-4.079 9.665-10.126 0-6.085-3.707-10.15-9.665-10.15-5.957 0-9.665 4.065-9.665 10.15 0 6.047 3.708 10.125 9.665 10.125zm.026-4.22c-2.749 0-4.155-2.518-4.155-5.944s1.406-5.957 4.155-5.957c2.697 0 4.103 2.531 4.103 5.957 0 3.426-1.406 5.945-4.103 5.945zM57.27 63.64c.012 2.634-1.79 4.014-3.746 4.014-2.058 0-3.388-1.444-3.4-3.758V52.364h-5.447v12.503c.013 4.589 2.698 7.389 6.648 7.389 2.953 0 5.075-1.522 5.957-3.823h.205V72h5.229V52.364h-5.447v11.275zM67.072 72h5.446V60.89c0-2.416 1.764-4.078 4.167-4.078.755 0 1.79.128 2.302.294v-4.832a8.177 8.177 0 00-1.714-.192c-2.198 0-4.001 1.279-4.717 3.708h-.204v-3.426h-5.28V72zM95.58 45.818h-5.446V72h5.446V45.818zm13.235 26.566c5.957 0 9.665-4.079 9.665-10.126 0-6.085-3.708-10.15-9.665-10.15-5.957 0-9.665 4.065-9.665 10.15 0 6.047 3.708 10.125 9.665 10.125zm.026-4.22c-2.749 0-4.155-2.518-4.155-5.944s1.406-5.957 4.155-5.957c2.697 0 4.103 2.531 4.103 5.957 0 3.426-1.406 5.945-4.103 5.945zm15.874 11.2c4.053 0 6.2-2.071 7.313-5.242l7.632-21.733-5.766-.025-4.104 14.42h-.204l-4.065-14.42h-5.728l7.044 20.199-.319.83c-.716 1.841-2.084 1.93-4.002 1.343l-1.227 4.065c.78.332 2.046.563 3.426.563zm22.769-6.993c2.902 0 4.781-1.266 5.74-3.094h.153V72h5.165V58.756c0-4.68-3.963-6.648-8.335-6.648-4.705 0-7.799 2.25-8.553 5.83l5.037.409c.371-1.304 1.534-2.263 3.49-2.263 1.854 0 2.915.933 2.915 2.544v.077c0 1.265-1.342 1.431-4.756 1.764-3.886.358-7.376 1.662-7.376 6.047 0 3.886 2.774 5.855 6.52 5.855zm1.559-3.759c-1.674 0-2.876-.78-2.876-2.275 0-1.534 1.266-2.289 3.183-2.557 1.189-.166 3.132-.448 3.784-.882v2.083c0 2.059-1.7 3.631-4.091 3.631zm19.17-22.794h-5.446V72h5.446V45.818zm23.254 6.546h-3.899v-1.317c0-1.33.537-2.11 2.135-2.11.652 0 1.317.141 1.752.282l.958-4.091c-.677-.205-2.173-.537-3.848-.537-3.694 0-6.443 2.084-6.443 6.354v1.419h-2.774v4.09h2.774V72h5.446V56.455h3.899v-4.091zm8.224 20.007c2.902 0 4.781-1.266 5.74-3.094h.153V72h5.165V58.756c0-4.68-3.963-6.648-8.335-6.648-4.705 0-7.799 2.25-8.553 5.83l5.037.409c.371-1.304 1.534-2.263 3.49-2.263 1.854 0 2.915.933 2.915 2.544v.077c0 1.265-1.342 1.431-4.756 1.764-3.886.358-7.376 1.662-7.376 6.047 0 3.886 2.774 5.855 6.52 5.855zm1.559-3.759c-1.674 0-2.876-.78-2.876-2.275 0-1.534 1.266-2.289 3.183-2.557 1.189-.166 3.132-.448 3.784-.882v2.083c0 2.059-1.7 3.631-4.091 3.631zm19.17-7.964c.013-2.532 1.521-4.015 3.72-4.015 2.186 0 3.503 1.432 3.49 3.836V72h5.446V59.497c0-4.577-2.684-7.389-6.775-7.389-2.915 0-5.024 1.432-5.906 3.72h-.231v-3.464h-5.19V72h5.446V60.648zm33.287-2.685c-.486-3.618-3.401-5.855-8.361-5.855-5.024 0-8.335 2.327-8.323 6.11-.012 2.941 1.841 4.846 5.677 5.613l3.4.677c1.713.346 2.493.972 2.519 1.957-.026 1.163-1.292 1.994-3.196 1.994-1.944 0-3.235-.831-3.567-2.43l-5.357.282c.512 3.759 3.708 6.072 8.911 6.072 5.088 0 8.731-2.595 8.744-6.468-.013-2.838-1.866-4.539-5.676-5.318l-3.554-.716c-1.828-.397-2.506-1.023-2.493-1.97-.013-1.175 1.317-1.942 3.004-1.942 1.892 0 3.017 1.035 3.286 2.3l4.986-.306zm9.795 10.458h-4.5l-.063 1.431c-.154 3.477-1.151 7.044-1.522 8.54h3.529c.613-1.547 2.071-5.177 2.416-8.565l.14-1.406zm17.681 3.95c2.902 0 4.781-1.266 5.74-3.094h.153V72h5.165V58.756c0-4.68-3.963-6.648-8.335-6.648-4.705 0-7.798 2.25-8.553 5.83l5.037.409c.371-1.304 1.534-2.263 3.49-2.263 1.854 0 2.915.933 2.915 2.544v.077c0 1.265-1.342 1.431-4.756 1.764-3.886.358-7.376 1.662-7.376 6.047 0 3.886 2.774 5.855 6.52 5.855zm1.56-3.759c-1.675 0-2.877-.78-2.877-2.275 0-1.534 1.266-2.289 3.183-2.557 1.189-.166 3.132-.448 3.784-.882v2.083c0 2.059-1.7 3.631-4.09 3.631zm19.169-22.794h-5.446V72h5.446V45.818zm9.809 0h-5.446V72h5.446V45.818zM11.046 116.384c5.957 0 9.664-4.079 9.664-10.125 0-6.086-3.707-10.151-9.665-10.151-5.957 0-9.664 4.065-9.664 10.151 0 6.046 3.707 10.125 9.665 10.125zm.025-4.219c-2.749 0-4.155-2.519-4.155-5.945s1.406-5.957 4.155-5.957c2.697 0 4.104 2.531 4.104 5.957 0 3.426-1.407 5.945-4.104 5.945zm18.626-7.517c.013-2.532 1.522-4.014 3.72-4.014 2.187 0 3.503 1.431 3.49 3.835V116h5.447v-12.503c0-4.576-2.685-7.389-6.776-7.389-2.915 0-5.024 1.432-5.906 3.72h-.23v-3.464h-5.19V116h5.445v-11.352zm28.643 18.716c4.053 0 6.2-2.071 7.313-5.242l7.632-21.733-5.766-.025-4.104 14.42h-.204l-4.065-14.42h-5.728l7.044 20.198-.32.831c-.715 1.841-2.083 1.931-4 1.343l-1.228 4.065c.78.333 2.045.563 3.426.563zm25.936-6.98c5.957 0 9.665-4.079 9.665-10.125 0-6.086-3.708-10.151-9.665-10.151-5.957 0-9.665 4.065-9.665 10.151 0 6.046 3.707 10.125 9.665 10.125zm.026-4.219c-2.75 0-4.155-2.519-4.155-5.945s1.406-5.957 4.154-5.957c2.698 0 4.104 2.531 4.104 5.957 0 3.426-1.406 5.945-4.103 5.945zm25.772-4.526c.013 2.634-1.79 4.014-3.746 4.014-2.058 0-3.387-1.444-3.4-3.758V96.364h-5.446v12.502c.013 4.59 2.697 7.39 6.648 7.39 2.953 0 5.075-1.522 5.957-3.823h.205V116h5.228V96.364h-5.446v11.275zm9.802 8.361h5.446v-11.109c0-2.417 1.765-4.079 4.168-4.079.754 0 1.79.128 2.301.295v-4.833a8.176 8.176 0 00-1.713-.192c-2.199 0-4.001 1.279-4.717 3.708h-.205v-3.426h-5.28V116zm33.508-19.636h-3.695v-4.705h-5.446v4.705h-2.685v4.091h2.685v10.227c-.026 3.848 2.595 5.753 6.545 5.586a10.578 10.578 0 002.953-.511l-.856-4.052c-.269.051-.844.179-1.355.179-1.087 0-1.841-.41-1.841-1.918v-9.511h3.695v-4.091zm12.285 20.02c4.858 0 8.131-2.366 8.898-6.009l-5.037-.332c-.55 1.495-1.956 2.275-3.771 2.275-2.723 0-4.449-1.802-4.449-4.73v-.013h13.372v-1.495c0-6.674-4.04-9.972-9.23-9.972-5.779 0-9.524 4.104-9.524 10.163 0 6.226 3.694 10.113 9.741 10.113zM161.31 104.2c.115-2.237 1.815-4.027 4.231-4.027 2.365 0 4.002 1.688 4.014 4.027h-8.245zm16.926 11.8h5.446v-11.109c0-2.417 1.764-4.079 4.167-4.079.755 0 1.79.128 2.302.295v-4.833a8.184 8.184 0 00-1.713-.192c-2.199 0-4.002 1.279-4.718 3.708h-.204v-3.426h-5.28V116zm14.73 0h5.446v-11.787c0-2.173 1.381-3.618 3.196-3.618 1.79 0 2.992 1.227 2.992 3.158V116h5.28v-11.991c0-2.033 1.163-3.414 3.145-3.414 1.738 0 3.042 1.087 3.042 3.273V116h5.433v-13.206c0-4.257-2.531-6.686-6.187-6.686-2.877 0-5.114 1.47-5.919 3.72h-.205c-.626-2.275-2.633-3.72-5.331-3.72-2.646 0-4.653 1.406-5.471 3.72h-.23v-3.464h-5.191V116zm49.174-14.037c-.486-3.618-3.4-5.855-8.361-5.855-5.024 0-8.335 2.327-8.322 6.111-.013 2.94 1.841 4.845 5.676 5.612l3.401.678c1.713.345 2.493.971 2.518 1.955-.025 1.164-1.291 1.995-3.196 1.995-1.943 0-3.234-.831-3.567-2.429l-5.356.281c.511 3.759 3.707 6.073 8.91 6.073 5.088 0 8.732-2.596 8.745-6.469-.013-2.838-1.867-4.539-5.676-5.318l-3.554-.716c-1.829-.397-2.506-1.023-2.493-1.969-.013-1.176 1.316-1.943 3.004-1.943 1.892 0 3.017 1.035 3.285 2.301l4.986-.307zm10.384-12.145h-5.689l.512 18.333h4.679l.498-18.333zm-2.838 26.514c1.636 0 3.055-1.368 3.068-3.068-.013-1.675-1.432-3.042-3.068-3.042-1.687 0-3.081 1.367-3.068 3.042-.013 1.7 1.381 3.068 3.068 3.068z"
              fill="#4F4F4F"
            />
            <Defs>
              <LinearGradientSVG
                id="paint0_linear"
                x1={374.811}
                y1={-31.4445}
                x2={11.6636}
                y2={24.7367}
                gradientUnits="userSpaceOnUse"
              >
                <Stop stopColor={palette.gradient.buttonV2[1]} />
                <Stop offset={1} stopColor={palette.gradient.buttonV2[0]} />
              </LinearGradientSVG>
            </Defs>
          </Svg>
          <Box marginTop='ls'>
            <Text
              color="emperor"
              lineHeight={vs(24)}
              tx={screen.description}
              fontSize={typography.fontSize.regularNotScale}
              fontFamily={typography.fontFamily.primary.regular}
            />
          </Box>
        </Box>
      )
    }
  }

  return (
    <Screen
      unsafe
      preset="fixed"
      headerV2={{
        leftButtonProps: {
          icon: { name: 'chevron-left', color: 'white', size: 26 },
        },
        onLeftPress: onBackPress,
      }}
    >
      <ScrollView
        ref={ref => { scrollViewRef.current = ref }}
        style={styles.scrollView}
        bounces={false}
        horizontal
        showsHorizontalScrollIndicator={false}
        scrollEventThrottle={10}
        pagingEnabled
        onScroll={Animated.event([{ nativeEvent: { contentOffset: { x: animVal } } }])}
        onMomentumScrollEnd={event => { isFirstScreen.current = event.nativeEvent.contentOffset.x < metrics.screenWidth }}
      >
        {screenArray}
      </ScrollView>
      <Box style={styles.barContainer}>
        <Box style={styles.pagination}>
          {barArray}
        </Box>
        {button}
      </Box>
    </Screen>
  )
}

const styles = ScaledSheet.create({
  scrollView: {
    width: metrics.screenWidth,
    height: metrics.screenHeight
  },
  imgBg: {
    height: metrics.screenHeight / 2,
    width: metrics.screenWidth,
    resizeMode: 'stretch',
  },
  logo: {
    position: 'absolute',
    top: metrics.screenHeight / 2 - vs(70),
    marginStart: '22@vs',
  },
  barContainer: {
    flexDirection: 'row',
    position: 'absolute',
    bottom: '22@vs',
    right: 0,
    left: 0,
    zIndex: 2,
    justifyContent: 'space-between',
    alignItems: 'center',
    marginHorizontal: '24@vs'
  },
  bar: {
    borderRadius: 4,
    marginHorizontal: 3,
    height: 8,
  },
  pagination: {
    width: 76,
    flexDirection: 'row',
  },
  buttonContainer: {
    overflow: 'hidden',
    height: vs(48),
    width: metrics.screenWidth * 0.6,
    borderRadius: 25,
  },
  buttonContent: {
    position: 'absolute',
    alignItems: 'center',
    justifyContent: 'center',
    flexDirection: 'row',
  },
  fixSize: {
    height: '100%',
    width: '100%',
  },
  buttonText: {
    color: 'white',
    fontWeight: '700',
    fontSize: typography.fontSize.medium,
  },
})

export default OnboardScreen
